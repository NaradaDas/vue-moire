"use strict";(self["webpackChunkmoire_build"]=self["webpackChunkmoire_build"]||[]).push([[413],{3812:function(t,e,a){a.d(e,{Z:function(){return u}});var o=a(3396);const i={class:"error item__button button button--primery"};function r(t,e,a,r,l,s){return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.WI)(t.$slots,"default")])}var l={},s=a(89);const c=(0,s.Z)(l,[["render",r]]);var u=c},2036:function(t,e,a){a.d(e,{Z:function(){return b}});var o=a(3396),i=a(7139),r=a(9242);const l={class:"form__counter"},s=["disabled"],c=(0,o._)("svg",{class:"button__plus",width:"12",height:"12",fill:"currentColor"},[(0,o._)("path",{d:"M8.287 2.574H.7V.765h7.587v1.809z"})],-1),u=[c],d=(0,o._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,o._)("path",{d:"M6.524 11.086h-1.43v-4.51H.54V5.102h4.554V.57h1.43v4.532h4.554v1.474H6.524v4.51z"})],-1),n=[d];function _(t,e,a,c,d,_){return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("button",{class:(0,i.C_)({counter_disabled:_.productAmount<=1}),type:"button","aria-label":"Убрать один товар",disabled:_.productAmount<=1,onClick:e[0]||(e[0]=(0,r.iM)((t=>_.productAmount--),["prevent"]))},u,10,s),(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=t=>_.productAmount=t),name:"count"},null,512),[[r.nr,_.productAmount,void 0,{number:!0}]]),(0,o._)("button",{type:"button","aria-label":"Добавить один\n                                товар",onClick:e[2]||(e[2]=(0,r.iM)((t=>_.productAmount++),["prevent"]))},n)])}var m={props:["quantity"],emits:["update:quantity","update:error","changeAmount"],computed:{productAmount:{get(){return this.quantity},set(t){t<1?this.$emit("update:error",!0):this.$emit("update:error",!1),this.$emit("update:quantity",t),this.$emit("changeAmount")}}}},p=a(89);const g=(0,p.Z)(m,[["render",_]]);var b=g},3413:function(t,e,a){a.r(e),a.d(e,{default:function(){return at}});var o=a(3396),i=a(7139),r=a(9242);const l={key:0,class:"content__top"},s={class:"breadcrumbs"},c={class:"breadcrumbs__item"},u=(0,o.Uk)(" Каталог "),d={class:"breadcrumbs__item"},n={class:"breadcrumbs__item"},_={class:"breadcrumbs__link"},m=(0,o.Uk)(" Не удалось получить данные о товаре. "),p={key:1,class:"item"},g={class:"item__pics pics"},b={class:"pics__wrapper"},v=["src","alt"],f={class:"item__info"},k=(0,o._)("span",{class:"item__code"},"Артикул: 150030",-1),h={class:"item__title"},y={class:"item__form"},w={class:"item__row item__row--center"},D={class:"item__price"},P={class:"item__row"},C={class:"form__block"},B=(0,o._)("legend",{class:"form__legend"},"Цвет",-1),I=["id"],S={class:"colors__label"},q=["checked","id","name","value","onClick"],H={class:"form__block"},z=(0,o._)("legend",{class:"form__legend"},"Размер",-1),Z={class:"form__label form__label--small form__label--select"},A=["value"],L=(0,o.Uk)(" Колличество товаров должно быть не меньше 1 "),F=["disabled"],U=(0,o.Uk)(" В корзину "),V={key:0,class:"button_success__text"},$=(0,o._)("p",{class:"button__fail"}," Не удалось положить товар в корзину, проверьте интернет-соединение и попробуйте перезагрузить страницу. ",-1),E={key:0,class:"item__desc"},T=(0,o.uE)('<ul class="tabs"><li class="tabs__item"><a class="tabs__link tabs__link--current"> Информация о товаре </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Доставка и возврат </a></li></ul>',1),M={class:"item__content"};function W(t,e,a,W,j,N){const x=(0,o.up)("router-link"),Q=(0,o.up)("BaseBigLoader"),K=(0,o.up)("BaseImageNotFound"),Y=(0,o.up)("BaseProductCounter"),G=(0,o.up)("BaseButtonError"),J=(0,o.up)("BaseSmallLoader");return(0,o.wg)(),(0,o.iD)("main",{class:(0,i.C_)([{"quick-view":t.isQuickView},"content container"])},[t.isQuickView?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("ul",s,[(0,o._)("li",c,[(0,o.Wm)(x,{to:{name:"main"},class:"breadcrumbs__link"},{default:(0,o.w5)((()=>[u])),_:1})]),(0,o._)("li",d,[(0,o.Wm)(x,{onClick:e[0]||(e[0]=e=>t.saveToLocalStorage(t.productData.category.id)),to:{name:"main"},class:"breadcrumbs__link",href:"#"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(t.productData?t.productData.category.title:""),1)])),_:1})]),(0,o._)("li",n,[(0,o._)("a",_,(0,i.zw)(t.productData?t.productData.title:""),1)])])])),(0,o.Wm)(Q,{class:"container",loading:t.isProductLoading,failed:t.isProductLoadingFailed},{default:(0,o.w5)((()=>[m])),_:1},8,["loading","failed"]),t.isProductLoading||t.isProductLoadingFailed?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("section",p,[(0,o._)("div",g,[(0,o._)("div",b,[t.image?((0,o.wg)(),(0,o.iD)("img",{key:1,class:"item__image",width:"570",height:"570",src:t.image,alt:t.productData.title},null,8,v)):((0,o.wg)(),(0,o.j4)(K,{key:0,class:"item__image"}))])]),(0,o._)("div",f,[k,(0,o._)("h2",h,(0,i.zw)(t.productData.title),1),(0,o._)("div",y,[(0,o._)("form",{class:"form",action:"#",onSubmit:e[4]||(e[4]=(0,r.iM)(((...e)=>t.addProductToBasket&&t.addProductToBasket(...e)),["prevent"]))},[(0,o._)("div",w,[(0,o.Wm)(Y,{quantity:t.productPostSettings.quantity,"onUpdate:quantity":e[1]||(e[1]=e=>t.productPostSettings.quantity=e),error:t.isCounterError,"onUpdate:error":e[2]||(e[2]=e=>t.isCounterError=e)},null,8,["quantity","error"]),(0,o._)("b",D,(0,i.zw)(t.editNumberFormat(t.productData.price))+" ₽ ",1)]),(0,o._)("div",P,[(0,o._)("fieldset",C,[B,(0,o._)("ul",{id:`product-colors-${t.productId}`,class:"colors colors--black"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.productData.colors,((e,a)=>((0,o.wg)(),(0,o.iD)("li",{key:a,class:"colors__item"},[(0,o._)("label",S,[(0,o._)("input",{checked:t.image===t.findImage(e),id:`color-checkboxes-${e.id}`,class:"colors__radio sr-only",type:"radio",name:`color-checkboxes-${t.productData.id}`,value:e.id,onClick:a=>t.changeColor(e)},null,8,q),(0,o._)("span",{class:"colors__value",style:(0,i.j5)({backgroundColor:e.color.code,border:"1px solid"+(27===e.color.id?" #e2e2e2":" transparent")})},null,4)])])))),128))],8,I)]),(0,o._)("fieldset",H,[z,(0,o._)("label",Z,[(0,o.wy)((0,o._)("select",{class:"form__select",name:"category","onUpdate:modelValue":e[3]||(e[3]=e=>t.productPostSettings.sizeId=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.productData.sizes,(t=>((0,o.wg)(),(0,o.iD)("option",{key:t.id,value:t.id},(0,i.zw)(t.title),9,A)))),128))],512),[[r.bM,t.productPostSettings.sizeId]])])])]),t.isCounterError?((0,o.wg)(),(0,o.j4)(G,{key:0},{default:(0,o.w5)((()=>[L])),_:1})):((0,o.wg)(),(0,o.iD)("button",{key:1,class:(0,i.C_)([{button_success:t.isProductAdded},"item__button button button--primery"]),disabled:t.isSendingProduct,type:"submit"},[U,t.isProductAdded?((0,o.wg)(),(0,o.iD)("div",V,"Товар добавлен в корзину")):(0,o.kq)("",!0),(0,o.Wm)(J,{class:(0,i.C_)({button__loader:!t.isSendingProductFailed}),sending:t.isSendingProduct,failed:t.isSendingProductFailed},{default:(0,o.w5)((()=>[$])),_:1},8,["class","sending","failed"])],10,F))],32)])]),t.productData.content?((0,o.wg)(),(0,o.iD)("div",E,[T,(0,o._)("div",M,(0,i.zw)(t.productData.content),1)])):(0,o.kq)("",!0)]))],2)}var j=a(9712),N=a(4929),x=a(7084),Q=a(2036),K=a(3812),Y=a(4870),G=a(4908),J=a(4078);function O(t){const{editNumberFormat:e,findImage:a}=(0,G.Z)(),{fetchProductData:o,postProduct:i}=(0,J.Z)(),r=(0,Y.iH)(!1),l=(0,Y.iH)(!1),s=(0,Y.iH)(null),c=(0,Y.iH)(""),u=(0,Y.qj)({quantity:1}),d=(0,Y.iH)(!1),n=()=>{r.value=!0,o(t).then((t=>{s.value=t.data,c.value=s.value.colors[0].gallery?s.value.colors[0].gallery[0].file.url:s.value.colors[1].gallery[0].file.url,u.productId=s.value.id,u.colorId=s.value.colors[0].gallery?s.value.colors[0].color.id:s.value.colors[1].color.id,u.sizeId=s.value.sizes[0].id})).catch((()=>{l.value=!0})).then((()=>{r.value=!1}))},_=t=>{u.colorId=t.color.id,null!==t.gallery?c.value=t.gallery[0].file.url:c.value=""},m=t=>{localStorage.setItem("categoryId",t)},p=(0,Y.iH)(!1),g=(0,Y.iH)(!1),b=(0,Y.iH)(!1);let v;const f=()=>{clearTimeout(v),b.value=!1,g.value=!1,p.value=!0,i(u).then((()=>{b.value=!0,v=setTimeout((()=>{b.value=!1}),2100)})).catch((()=>{g.value=!0})).then((()=>{p.value=!1}))};return n(),{findImage:a,isProductAdded:b,editNumberFormat:e,isCounterError:d,isSendingProduct:p,isSendingProductFailed:g,addProductToBasket:f,saveToLocalStorage:m,productPostSettings:u,changeColor:_,image:c,isProductLoading:r,isProductLoadingFailed:l,productData:s}}var R=a(678),X=(0,o.aZ)({components:{BaseButtonError:K.Z,BaseBigLoader:N.Z,BaseImageNotFound:j.Z,BaseSmallLoader:x.Z,BaseProductCounter:Q.Z},props:["productId"],setup(t){const e=(0,Y.iH)("main"==(0,R.yj)().name);return{...O(t.productId),isQuickView:e}}}),tt=a(89);const et=(0,tt.Z)(X,[["render",W]]);var at=et}}]);
//# sourceMappingURL=413.c5943389.js.map